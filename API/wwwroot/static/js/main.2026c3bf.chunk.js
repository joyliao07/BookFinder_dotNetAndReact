(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{277:function(e,t,r){},462:function(e,t,r){"use strict";r.r(t),r.d(t,"history",(function(){return Fe}));var o=r(1),n=r(34),a=r.n(n),c=(r(277),r(278),r(480)),s=r(485),i=r(16),l=r(483),u=r(491),d=r(132),j=r(0),b=r(33),h=r(17),O=r.n(h),f=r(38),x=r(14),p=r(15),m=r(20),v=r(52),g=r.n(v),k=r(205);g.a.defaults.baseURL="/api",g.a.interceptors.request.use((function(e){var t=T.userStore.token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),g.a.interceptors.response.use(function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){var t=e.response,r=t.data,o=t.status,n=t.config;switch(o){case 400:if("get"===n.method&&r.errors.hasOwnProperty("id")&&Fe.push("/not-found"),r.errors){var a=[];for(var c in r.errors)r.errors[c]&&a.push(r.errors[c]);throw a.flat()}k.a.error(r);break;case 401:k.a.error("unauthorised");break;case 404:Fe.push("/not-found");break;case 500:T.bookStore.setServerError(r),Fe.push("/server-error")}return Promise.reject(e)}));var y=function(e){return e.data},S=function(e){return g.a.get(e).then(y)},B=function(e,t){return g.a.post(e,t).then(y)},w={Books:{list:function(){return S("/books")},details:function(e){return S("/books/".concat(e))},create:function(e){return g.a.post("/books",e)},update:function(e){return g.a.put("/books/".concat(e.id),e)},delete:function(e){return g.a.delete("/books/".concat(e))},search:function(e){return g.a.get("/search/".concat(e))}},Account:{current:function(){return S("/account")},login:function(e){return B("account/login",e)},register:function(e){return B("/account/register",e)}}},I=function(){function e(){var t=this;Object(x.a)(this,e),this.bookRegistry=new Map,this.selectedBookFromShelf=void 0,this.selectedBookToAdd=void 0,this.searchedBooks=void 0,this.editMode=!1,this.loading=!1,this.loadingInitial=!0,this.error=null,this.setBookToRegistry=function(e){e.date=new Date(e.date),t.bookRegistry.set(e.id,e)},this.setLoadingInitial=function(e){t.loadingInitial=e},this.loadBooksFromShelf=Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingInitial=!0,e.prev=1,e.next=4,w.Books.list();case 4:e.sent.forEach((function(e){t.setBookToRegistry(e)})),t.setLoadingInitial(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t.setLoadingInitial(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),this.loadBookFromShelf=function(){var e=Object(f.a)(O.a.mark((function e(r){var o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selectedBookToAdd=void 0,!(o=t.bookRegistry.get(r))){e.next=7;break}return t.selectedBookFromShelf=o,e.abrupt("return",o);case 7:return t.loadingInitial=!0,e.prev=8,e.next=11,w.Books.details(r);case 11:return o=e.sent,t.setBookToRegistry(o),Object(m.e)((function(){t.selectedBookFromShelf=o})),t.setLoadingInitial(!1),e.abrupt("return",o);case 18:e.prev=18,e.t0=e.catch(8),console.log(e.t0),t.setLoadingInitial(!1);case 22:case"end":return e.stop()}}),e,null,[[8,18]])})));return function(t){return e.apply(this,arguments)}}(),this.updateBookFromShelf=function(){var e=Object(f.a)(O.a.mark((function e(r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,w.Books.update(r);case 4:Object(m.e)((function(){t.bookRegistry.set(r.id,r),t.selectedBookFromShelf=r,t.editMode=!1,t.loading=!1})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(m.e)((function(){t.loading=!1}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.deleteBook=function(){var e=Object(f.a)(O.a.mark((function e(r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,w.Books.delete(r);case 4:Object(m.e)((function(){t.bookRegistry.delete(r),t.loading=!1})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(m.e)((function(){t.loading=!1}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.searchBooks=function(){var e=Object(f.a)(O.a.mark((function e(r){var o,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],t.loadingInitial=!0,e.prev=2,e.next=5,w.Books.search(r);case 5:n=e.sent,Object(m.e)((function(){o=t.formatSearchResults(n.data.items),t.searchedBooks=o,t.loadingInitial=!1})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),t.loadingInitial=!1;case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),this.loadSearchedBookToForm=function(){return{id:"",bookTitle:t.selectedBookToAdd.bookTitle,bookSubtitle:t.selectedBookToAdd.bookSubtitle,author:t.selectedBookToAdd.author,thumbnail:t.selectedBookToAdd.thumbnail,notes:"",bookUrl:t.selectedBookToAdd.bookUrl,date:new Date,userName:"joyce",status:"To Read",favorite:!1}},this.formatSearchResults=function(e){var t=[];for(var r in e){var o="";e[r].volumeInfo.hasOwnProperty("authors")&&(o=e[r].volumeInfo.authors[0]);var n="";e[r].volumeInfo.hasOwnProperty("imageLinks")&&e[r].volumeInfo.imageLinks.hasOwnProperty("thumbnail")&&(n=e[r].volumeInfo.imageLinks.thumbnail);var a="",c="";e[r].volumeInfo.hasOwnProperty("industryIdentifiers")&&(e[r].volumeInfo.industryIdentifiers[0].hasOwnProperty("type")&&(a=e[r].volumeInfo.industryIdentifiers[0].type),e[r].volumeInfo.industryIdentifiers[0].hasOwnProperty("identifier")&&(c=e[r].volumeInfo.industryIdentifiers[0].identifier));var s="";e[r].volumeInfo.hasOwnProperty("categories")&&(s=e[r].volumeInfo.categories[0]);var i="";e[r].hasOwnProperty("saleInfo")&&e[r].saleInfo.hasOwnProperty("buyLink")&&(i=e[r].saleInfo.buyLink);var l={id:e[r].id,bookTitle:e[r].volumeInfo.title,bookSubtitle:e[r].volumeInfo.subtitle,author:o,thumbnail:n,bookUrl:e[r].selfLink,publishedDate:e[r].volumeInfo.publishedDate,publisher:e[r].volumeInfo.publisher,category:s,description:e[r].volumeInfo.description,averageRating:e[r].volumeInfo.averageRating,ratingsCount:e[r].volumeInfo.ratingsCount,pageCount:e[r].volumeInfo.pageCount,industryIdentifiersType:a,industryIdentifier:c,buyLink:i};t.push(l)}return t},this.addBookToShelf=function(){var e=Object(f.a)(O.a.mark((function e(r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,w.Books.create(r);case 4:Object(m.e)((function(){t.bookRegistry.set(r.id,r),t.selectedBookFromShelf=r,t.editMode=!1,t.loading=!1})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(m.e)((function(){t.loading=!1}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.setServerError=function(e){t.error=e},Object(m.c)(this)}return Object(p.a)(e,[{key:"booksByStatus",get:function(){return Array.from(this.bookRegistry.values()).sort((function(e,t){return e.status-t.status}))}},{key:"groupedBooks",get:function(){return Object.entries(this.booksByStatus.reduce((function(e,t){var r=t.status;return e[r]=e[r]?[].concat(Object(b.a)(e[r]),[t]):[t],e}),{}))}}]),e}(),F=function(){function e(){var t=this;Object(x.a)(this,e),this.user=null,this.token=window.localStorage.getItem("jwt"),this.appLoaded=!1,this.setToken=function(e){t.token=e},this.setAppLoaded=function(){t.appLoaded=!0},this.login=function(){var e=Object(f.a)(O.a.mark((function e(r){var o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.Account.login(r);case 3:o=e.sent,t.setToken(o.token),Object(m.e)((function(){return t.user=o})),Fe.push("/books"),T.modalStore.closeModal(),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){t.setToken(null),window.localStorage.removeItem("jwt"),t.user=null,T.bookStore.bookRegistry=new Map,Fe.push("/")},this.getUser=Object(f.a)(O.a.mark((function e(){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.Account.current();case 3:r=e.sent,Object(m.e)((function(){return t.user=r})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.register=function(){var e=Object(f.a)(O.a.mark((function e(r){var o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.Account.register(r);case 3:o=e.sent,t.setToken(o.token),Object(m.e)((function(){return t.user=o})),Fe.push("/books"),T.modalStore.closeModal(),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Object(m.c)(this),Object(m.d)((function(){return t.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))}return Object(p.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}}]),e}(),T={bookStore:new I,userStore:new F,modalStore:new function e(){var t=this;Object(x.a)(this,e),this.modal={open:!1,body:null},this.openModal=function(e){t.modal.open=!0,t.modal.body=e},this.closeModal=function(){t.modal.open=!1,t.modal.body=null},Object(m.c)(this)}},C=Object(j.createContext)(T);function L(){return Object(j.useContext)(C)}var R=Object(s.a)((function(){var e,t=L().userStore;return Object(o.jsx)(l.a,{inverted:!0,fixed:"top",children:Object(o.jsxs)(c.a,{children:[Object(o.jsxs)(l.a.Item,{as:i.b,exact:!0,to:"/",header:!0,children:[Object(o.jsx)("img",{src:"/read.png",alt:"logo",style:{marginRight:"10px"}}),"BookFinder"]}),Object(o.jsx)(l.a.Item,{as:i.b,to:"/books",name:"Bookshelf"}),Object(o.jsx)(l.a.Item,{children:Object(o.jsx)(u.a,{as:i.b,to:"/search",color:"teal",content:"Search Books"})}),t.user&&Object(o.jsx)(l.a.Item,{position:"right",children:Object(o.jsx)(d.a,{pointing:"top left",text:"Wecome ".concat(null===(e=t.user)||void 0===e?void 0:e.displayName),children:Object(o.jsxs)(d.a.Menu,{children:[Object(o.jsx)(d.a.Item,{as:i.b,to:"/books",text:"My Bookshelf",icon:"book"}),Object(o.jsx)(d.a.Item,{as:i.b,to:"/search",text:"Find Books",icon:"search"}),Object(o.jsx)(d.a.Item,{onClick:t.logout,text:"Logout",icon:"power"})]})})})]})})})),M=r(496),D=r(492),A=r(481);function N(e){var t=e.inverted,r=void 0===t||t,n=e.content,a=void 0===n?"Loading App...":n;return Object(o.jsx)(D.a,{active:!0,inverted:r,children:Object(o.jsx)(A.a,{content:a})})}var P=r(22),z=r(495),E=r(118),q=r(464),V=r(494),W=r(486),U=function(e){var t=e.book,r=L().bookStore.deleteBook;return Object(o.jsxs)(V.a.Group,{children:[Object(o.jsx)(V.a,{children:Object(o.jsx)(W.a.Group,{children:Object(o.jsxs)(W.a,{children:[Object(o.jsx)(W.a.Image,{size:"tiny",src:t.thumbnail}),Object(o.jsxs)(W.a.Content,{children:[Object(o.jsx)(W.a.Header,{as:i.a,to:"/books/".concat(t.id),children:t.bookTitle}),""!==t.author&&Object(o.jsxs)(W.a.Description,{children:["By ",t.author]})]})]})})}),Object(o.jsxs)(V.a,{children:[t.favorite&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(E.a,{name:"favorite"}),"Favorite"]}),!t.favorite&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(E.a,{name:"dont"}),"Not favorite"]})]}),Object(o.jsxs)(V.a,{children:[Object(o.jsx)(E.a,{name:"calendar"}),"Last updated on ",Object(q.default)(t.date,"MMM dd, yyyy")]}),Object(o.jsxs)(V.a,{secondary:!0,children:[Object(o.jsx)(E.a,{name:"book"}),t.status]}),Object(o.jsxs)(V.a,{clearing:!0,children:[Object(o.jsx)(u.a,{as:i.a,to:"/books/".concat(t.id),color:"olive",floated:"right",content:"View Details"}),Object(o.jsx)(u.a,{color:"orange",floated:"right",content:"Delete",onClick:function(){return r(t.id)}})]})]})},G=Object(s.a)((function(){var e=L().bookStore.groupedBooks;return Object(o.jsxs)(o.Fragment,{children:[e.length>0&&e.map((function(e){var t=Object(P.a)(e,2),r=t[0],n=t[1];return Object(o.jsxs)(j.Fragment,{children:[Object(o.jsx)(z.a,{sub:!0,color:"blue",children:r}),n.map((function(e){return Object(o.jsx)(U,{book:e},e.id)}))]},r)})),0===e.length&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(z.a,{as:"h2",color:"blue",children:"There is no book on your bookshelf."}),Object(o.jsx)(E.a,{name:"hand point right outline",size:"large",style:{marginLeft:"10%"}}),Object(o.jsx)(u.a,{as:i.b,to:"/search",color:"teal",content:"Search Books"})]})]})})),H=Object(s.a)((function(){var e=L().bookStore,t=e.loadBooksFromShelf,r=e.bookRegistry;return Object(j.useEffect)((function(){r.size<=1&&t()}),[r.size,t]),e.loadingInitial?Object(o.jsx)(N,{content:"Loading bookshelf"}):Object(o.jsx)(M.a,{children:Object(o.jsx)(M.a.Column,{width:"10",children:Object(o.jsx)(G,{})})})})),J=r(19),_=r(260),K=r(18),Q=r(172),X=r(26),Y=r(484);var Z=function(e){var t=Object(K.d)(e.name),r=Object(P.a)(t,2),n=r[0],a=r[1];return Object(o.jsxs)(Y.a.Field,{error:a.touched&&!!a.error,children:[Object(o.jsx)("label",{children:e.label}),Object(o.jsx)("input",Object(X.a)(Object(X.a)({},n),e)),a.touched&&a.error?Object(o.jsx)(Q.a,{basic:!0,color:"red",children:a.error}):null]})},$=Object(s.a)((function(){var e=L().userStore;return Object(o.jsx)(K.c,{initialValues:{email:"",password:"",error:null},onSubmit:function(t,r){var o=r.setErrors;return e.login(t).catch((function(e){return o({error:"Invalid email or password"})}))},children:function(e){var t=e.handleSubmit,r=e.isSubmitting,n=e.errors;return Object(o.jsxs)(K.b,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(o.jsx)(z.a,{as:"h2",color:"teal",content:"Login",textAlign:"center"}),Object(o.jsx)(Z,{name:"email",placeholder:"Email"}),Object(o.jsx)(Z,{name:"password",placeholder:"Password",type:"password"}),Object(o.jsx)(K.a,{name:"error",render:function(){return Object(o.jsx)(Q.a,{style:{marginBottom:12},basic:!0,color:"red",content:n.error})}}),Object(o.jsx)(u.a,{loading:r,color:"teal",content:"Login",type:"submit",fluid:!0})]})}})})),ee=r(47),te=r(489);function re(e){var t=e.errors;return console.log(t),Object(o.jsx)(te.a,{error:!0,children:t&&Object(o.jsx)(te.a.List,{children:t.map((function(e,t){return Object(o.jsx)(te.a.Item,{children:e},t)}))})})}var oe=Object(s.a)((function(){var e=L().userStore;return Object(o.jsx)(K.c,{initialValues:{displayName:"",username:"",email:"",password:"",error:null},onSubmit:function(t,r){var o=r.setErrors;return e.register(t).catch((function(e){return o({error:e})}))},validationSchema:ee.a({displayName:ee.b().required(),username:ee.b().required(),email:ee.b().required().email(),password:ee.b().required()}),children:function(e){var t=e.handleSubmit,r=e.isSubmitting,n=e.errors,a=e.isValid,c=e.dirty;return Object(o.jsxs)(K.b,{className:"ui form error",onSubmit:t,autoComplete:"off",children:[Object(o.jsx)(z.a,{as:"h2",color:"teal",textAlign:"center",content:"Sign up to BookFinder"}),Object(o.jsx)(Z,{name:"displayName",placeholder:"Display Name"}),Object(o.jsx)(Z,{name:"username",placeholder:"Username"}),Object(o.jsx)(Z,{name:"email",placeholder:"Email"}),Object(o.jsx)(Z,{name:"password",placeholder:"Password",type:"password"}),Object(o.jsx)(K.a,{name:"error",render:function(){return Object(o.jsx)(re,{errors:n.error})}}),Object(o.jsx)(u.a,{disabled:!a||!c||r,loading:r,color:"teal",content:"Register",type:"submit",fluid:!0})]})}})})),ne=Object(s.a)((function(){var e=L(),t=e.userStore,r=e.modalStore;return Object(o.jsx)(V.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead",children:Object(o.jsxs)(c.a,{text:!0,children:[Object(o.jsxs)(z.a,{as:"h1",inverted:!0,children:[Object(o.jsx)(_.a,{size:"massive",src:"/read.png",alt:"logo",style:{marginBottom:12}}),"BookFinder"]}),t.isLoggedIn?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{style:{marginBottom:30},children:[Object(o.jsxs)("h1",{style:{marginBottom:25},children:["Welcome back, ",t.user.displayName,"! "]}),Object(o.jsx)(u.a,{as:i.a,to:"/books",size:"huge",inverted:!0,children:"Go to Bookshelf!"})]}),Object(o.jsx)(u.a,{onClick:t.logout,size:"medium",inverted:!0,children:"Logout"})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(u.a,{size:"huge",inverted:!0,onClick:function(){return r.openModal(Object(o.jsx)($,{}))},children:"Login"}),Object(o.jsx)(u.a,{size:"huge",inverted:!0,onClick:function(){return r.openModal(Object(o.jsx)(oe,{}))},children:"Register"})]})]})})})),ae=r(488),ce=Object(s.a)((function(){var e=L().bookStore,t=e.selectedBookFromShelf,r=e.loadBookFromShelf,n=e.loadingInitial,a=Object(J.i)().id;return Object(j.useEffect)((function(){a&&r(a)}),[a,r]),n||!t?Object(o.jsx)(N,{}):Object(o.jsxs)(ae.a,{fluid:!0,children:[Object(o.jsxs)(ae.a.Content,{children:[Object(o.jsx)(_.a,{src:t.thumbnail,size:"small",floated:"left"}),Object(o.jsx)(ae.a.Header,{children:t.bookTitle}),Object(o.jsx)(ae.a.Meta,{children:t.bookSubtitle}),""!==t.author&&Object(o.jsxs)("p",{children:["By ",t.author]})]}),Object(o.jsx)(ae.a.Content,{children:Object(o.jsxs)(ae.a.Description,{children:[t.favorite&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(E.a,{name:"favorite"}),"Favorite"]}),!t.favorite&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(E.a,{name:"dont"}),"Not favorite"]})]})}),Object(o.jsx)(ae.a.Content,{children:Object(o.jsxs)(ae.a.Description,{children:[Object(o.jsx)(E.a,{name:"calendar"}),"Last updated on ",Object(q.default)(t.date,"MMM dd, yyyy")]})}),Object(o.jsxs)(ae.a.Content,{children:[Object(o.jsxs)(ae.a.Description,{children:[Object(o.jsx)(E.a,{name:"book"})," ",t.status]}),Object(o.jsxs)(V.a,{children:[Object(o.jsx)("h4",{children:"Notes:"}),Object(o.jsx)("p",{children:t.notes}),""===t.notes&&Object(o.jsx)("p",{children:"(Currently no notes for this book)"})]}),Object(o.jsx)(u.a,{as:i.a,to:"/manage/".concat(t.id),color:"olive",floated:"right",children:"Edit Book Status"}),Object(o.jsx)(u.a,{as:i.a,to:"/books",color:"grey",floated:"right",children:"Cancel"})]})]})})),se=r(490),ie=r(482);function le(e){var t=Object(K.d)(e.name),r=Object(P.a)(t,3),n=r[0],a=r[1],c=r[2];return Object(o.jsxs)(Y.a.Field,{error:a.touched&&!!a.error,children:[Object(o.jsx)("label",{children:e.label}),Object(o.jsx)(ie.a,{clearable:!0,options:e.options,value:n.value||null,onChange:function(e,t){return c.setValue(t.value)},onBlur:function(){return c.setTouched(!0)},placeholder:e.placeholder}),a.touched&&a.error?Object(o.jsx)(Q.a,{basic:!0,color:"red",children:a.error}):null]})}var ue=r(256),de=r.n(ue);function je(e){var t=Object(K.d)(e.name),r=Object(P.a)(t,3),n=r[0],a=r[1],c=r[2];return Object(o.jsxs)(Y.a.Field,{error:a.touched&&!!a.error,children:[Object(o.jsx)(de.a,Object(X.a)(Object(X.a)(Object(X.a)({},n),e),{},{selected:n.value&&new Date(n.value)||null,onChange:function(e){return c.setValue(e)}})),a.touched&&a.error?Object(o.jsx)(Q.a,{basic:!0,color:"red",children:a.error}):null]})}var be=function(e){var t=Object(K.d)(e.name),r=Object(P.a)(t,2),n=r[0],a=r[1];return Object(o.jsxs)(Y.a.Field,{error:a.touched&&!!a.error,children:[Object(o.jsx)("label",{children:"Notes: "}),Object(o.jsx)("textarea",Object(X.a)(Object(X.a)({},n),e)),a.touched&&a.error?Object(o.jsx)(Q.a,{basic:!0,color:"red",children:a.error}):null]})},he=Object(s.a)((function(){var e=Object(J.g)(),t=L(),r=t.bookStore,n=t.modalStore,a=r.addBookToShelf,c=r.updateBookFromShelf,s=r.loading,l=r.loadBookFromShelf,d=r.selectedBookToAdd,b=r.loadSearchedBookToForm,h=r.loadingInitial,O=Object(J.i)().id,f=Object(j.useState)({id:"",bookTitle:"",bookSubtitle:"",author:"",thumbnail:"",notes:"",bookUrl:"",date:null,userName:"",status:"",favorite:"Not favorite"}),x=Object(P.a)(f,2),p=x[0],m=x[1],v=ee.a({date:ee.b().required("Date is required").nullable(),status:ee.b().required("Reading stsatus is required.")});Object(j.useEffect)((function(){if(void 0===d)l(O).then((function(e){return m(e)}));else{n.closeModal();var e=b();m(e)}}),[O,l,d,b,n]);var g=[{text:"Favorite",value:"Favorite"},{text:"Not Favorite",value:"Not favorite"}],k=[{text:"To Read",value:"To Read"},{text:"Reading Now",value:"Reading Now"},{text:"Done Reading",value:"Done Reading"}];return h?Object(o.jsx)(N,{content:"Loading book..."}):Object(o.jsxs)(V.a,{clearing:!0,children:[Object(o.jsx)(z.a,{content:"Book Details",sub:!0,color:"blue"}),Object(o.jsxs)(ae.a,{fluid:!0,children:[Object(o.jsxs)(ae.a.Content,{children:[Object(o.jsx)(ae.a.Header,{children:p.bookTitle}),Object(o.jsx)("p",{children:p.bookSubtitle}),Object(o.jsxs)(ae.a.Description,{children:["By ",p.author]})]}),Object(o.jsx)(ae.a.Content,{children:Object(o.jsx)(K.c,{validationSchema:v,enableReinitialize:!0,initialValues:p,onSubmit:function(t){return function(t){if("Favorite"===t.favorite?t.favorite=!0:t.favorite=!1,0===t.id.length){var r=Object(X.a)(Object(X.a)({},t),{},{id:Object(se.a)()});a(r).then((function(){return e.push("/books/".concat(r.id))}))}else c(t).then((function(){return e.push("/books/".concat(t.id))}))}(t)},children:function(e){var t=e.handleSubmit,r=e.isValid,n=e.isSubmitting;e.dirty;return Object(o.jsxs)(K.b,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(o.jsx)(le,{options:g,placeholder:"Favorite",name:"favorite"}),Object(o.jsx)(je,{placeholderText:"Date",name:"date",dateFormat:"MMMM d, yyyy"}),Object(o.jsx)(le,{options:k,placeholder:"Status",name:"status"}),Object(o.jsx)(be,{rows:3,placeholder:"My notes",name:"notes"}),Object(o.jsx)(u.a,{disabled:n||!r,loading:s,floated:"right",color:"olive",type:"submit",content:"Save"}),Object(o.jsx)(u.a,{as:i.a,to:"/books",floated:"right",type:"button",content:"Cancel"})]})}})})]})]})}));function Oe(e){var t=Object(K.d)(e.name),r=Object(P.a)(t,2),n=r[0],a=r[1];return Object(o.jsxs)(Y.a.Field,{error:a.touched&&!!a.error,children:[Object(o.jsx)("label",{children:e.label}),Object(o.jsx)("input",Object(X.a)(Object(X.a)({},n),e)),a.touched&&a.error?Object(o.jsx)(Q.a,{basic:!0,color:"red",children:a.error}):null]})}var fe=function(){var e=Object(j.useState)(null),t=Object(P.a)(e,2),r=t[0],n=t[1],a=L().bookStore,s=ee.a({keyWord:ee.b().required("Enter keyword to search.").nullable()}),i=function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.loadingInitial=!0,n(t.keyWord);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?Object(o.jsx)(J.a,{to:"/search/".concat(r)}):Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(c.a,{style:{marginTop:"7em"},children:[Object(o.jsx)("h3",{children:"Search Book"}),Object(o.jsx)(K.c,{validationSchema:s,enableReinitialize:!0,initialValues:{keyWord:""},onSubmit:function(e){return i(e)},children:function(e){var t=e.handleSubmit,r=e.isValid;return Object(o.jsxs)(K.b,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(o.jsx)(Oe,{name:"keyWord",placeholder:"Search Word"}),Object(o.jsx)(u.a,{disabled:!r,floated:"right",positive:!0,type:"submit",content:"Search"})]})}})]})})},xe=function(){var e=L().bookStore.selectedBookToAdd;return Object(o.jsxs)(ae.a,{fluid:!0,children:[Object(o.jsxs)(ae.a.Content,{children:[Object(o.jsxs)("div",{style:{height:"140px"},children:[Object(o.jsx)(_.a,{src:e.thumbnail,size:"tiny",floated:"left"}),Object(o.jsx)("h3",{children:e.bookTitle}),Object(o.jsx)(ae.a.Meta,{children:e.bookSubtitle}),""!==e.author&&Object(o.jsxs)("p",{children:["By ",e.author]}),""!==e.publisher&&Object(o.jsxs)("p",{children:["Publisher: ",e.publisher]}),""!==e.publishedDate&&Object(o.jsxs)("p",{children:["Publish date: ",e.publishedDate]})]}),""!==e.category&&Object(o.jsx)(V.a.Group,{children:Object(o.jsxs)(V.a,{children:["Category: ",e.category]})}),void 0!==e.description&&Object(o.jsxs)(V.a.Group,{children:[Object(o.jsx)(V.a,{children:"Description:"}),Object(o.jsx)(V.a,{children:e.description})]}),void 0!==e.averageRating&&Object(o.jsx)(V.a.Group,{children:Object(o.jsxs)(V.a,{children:[Object(o.jsxs)("p",{children:["Rating: ",e.averageRating," out of 5 stars"]}),void 0!==e.ratingsCount&&Object(o.jsxs)("p",{children:["Number of votes: ",e.ratingsCount]})]})}),Object(o.jsxs)(V.a.Group,{children:[void 0!==e.pageCount&&Object(o.jsxs)(V.a,{children:["Page Count: ",e.pageCount]}),e.industryIdentifier.length>3&&Object(o.jsxs)(V.a,{children:[Object(o.jsx)("p",{children:"Industry Identifier:"}),e.industryIdentifiersType,". ",e.industryIdentifier]}),""!==e.buyLink&&Object(o.jsxs)(V.a,{children:[Object(o.jsx)("h5",{children:"Purchase Link:"}),Object(o.jsx)("a",{href:e.buyLink,target:"_blank",rel:"noopener noreferrer",children:e.buyLink})]})]})]}),Object(o.jsx)(u.a,{as:i.a,to:"/addBook/".concat(e.id),color:"olive",floated:"right",children:"Add To Bookshelf"})]})};var pe=Object(s.a)((function(){var e=L(),t=e.bookStore,r=e.modalStore,n=t.searchBooks,a=t.searchedBooks,s=t.loadingInitial,i=Object(J.i)().keyWord;return Object(j.useEffect)((function(){n(i)}),[n,i]),s?Object(o.jsx)(N,{content:"Loading search results"}):Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(c.a,{style:{marginTop:"7em"},children:[Object(o.jsx)("h3",{children:"Search results"}),a.map((function(e){return Object(o.jsxs)(ae.a,{fluid:!0,children:[Object(o.jsxs)(ae.a.Content,{children:[Object(o.jsx)(_.a,{src:e.thumbnail,size:"tiny",floated:"left"}),Object(o.jsx)("h3",{children:e.bookTitle}),Object(o.jsx)("h5",{children:e.bookSubtitle})]}),Object(o.jsxs)(ae.a.Content,{children:[""!==e.author&&Object(o.jsxs)("p",{children:["By ",e.author]}),""!==e.publishedDate&&Object(o.jsxs)("p",{children:["Publish date: ",e.publishedDate]}),Object(o.jsx)(u.a,{color:"olive",floated:"right",onClick:function(){return function(e){var n=a.find((function(t){return t.id===e}));t.selectedBookToAdd=n,r.openModal(Object(o.jsx)(xe,{}))}(e.id)},children:"More Details"})]})]},e.id)}))]})})})),me=r(487),ve=Object(s.a)((function(){var e=L().modalStore;return Object(o.jsx)(me.a,{open:e.modal.open,onClose:e.closeModal,size:"small",children:Object(o.jsx)(me.a.Content,{children:e.modal.body})})})),ge=r(259),ke=function(e){var t=e.component,r=Object(ge.a)(e,["component"]),n=L().userStore.isLoggedIn;return Object(o.jsx)(J.b,Object(X.a)(Object(X.a)({},r),{},{render:function(e){return n?Object(o.jsx)(t,Object(X.a)({},e)):Object(o.jsx)(J.a,{to:"/"})}}))};function ye(){return Object(o.jsxs)(V.a,{placeholder:!0,children:[Object(o.jsxs)(z.a,{icon:!0,children:[Object(o.jsx)(E.a,{name:"search"}),"Oops - we cannot find the page..."]}),Object(o.jsx)(V.a.Inline,{children:Object(o.jsx)(u.a,{as:i.a,to:"/books",color:"teal",children:"Return to Bookshelf"})})]})}var Se=Object(s.a)((function(){var e,t,r=L().bookStore;return Object(o.jsxs)(c.a,{children:[Object(o.jsx)(z.a,{as:"h1",content:"Server Error"}),Object(o.jsx)(z.a,{sub:!0,as:"h5",color:"red",content:null===(e=r.error)||void 0===e?void 0:e.message}),(null===(t=r.error)||void 0===t?void 0:t.details)&&Object(o.jsxs)(V.a,{children:[Object(o.jsx)(z.a,{as:"h4",content:"Stack trace",color:"teal"}),Object(o.jsx)("code",{style:{marginTop:"10px"},children:r.error.details})]})]})}));var Be=Object(s.a)((function(){var e=Object(J.h)(),t=L().userStore;return Object(j.useEffect)((function(){t.token?t.getUser().finally((function(){return t.setAppLoaded()})):t.setAppLoaded()}),[t]),t.appLoaded?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(ve,{}),Object(o.jsx)(J.b,{exact:!0,path:"/",component:ne}),Object(o.jsx)(J.b,{path:"/(.+)",render:function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(R,{}),Object(o.jsx)(c.a,{style:{marginTop:"7em"},children:Object(o.jsxs)(J.d,{children:[Object(o.jsx)(ke,{exact:!0,path:"/books",component:H}),Object(o.jsx)(ke,{path:"/books/:id",component:ce}),Object(o.jsx)(ke,{exact:!0,path:"/search",component:fe}),Object(o.jsx)(ke,{path:"/search/:keyWord",component:pe}),Object(o.jsx)(J.b,{path:["/addBook/:id","/manage/:id"],component:he},e.key),Object(o.jsx)(J.b,{component:ye}),Object(o.jsx)(J.b,{path:"/server-error",component:Se})]})})]})}})]}):Object(o.jsx)(N,{})})),we=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,498)).then((function(t){var r=t.getCLS,o=t.getFID,n=t.getFCP,a=t.getLCP,c=t.getTTFB;r(e),o(e),n(e),a(e),c(e)}))},Ie=(r(461),r(42)),Fe=Object(Ie.a)();a.a.render(Object(o.jsx)(C.Provider,{value:T,children:Object(o.jsx)(J.c,{history:Fe,children:Object(o.jsx)(Be,{})})}),document.getElementById("root")),we()}},[[462,1,2]]]);
//# sourceMappingURL=main.2026c3bf.chunk.js.map